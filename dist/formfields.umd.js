(function(e,l){typeof exports=="object"&&typeof module!="undefined"?l(require("vue")):typeof define=="function"&&define.amd?define(["vue"],l):(e=typeof globalThis!="undefined"?globalThis:e||self,l(e.Vue))})(this,function(e){"use strict";var l=(o,n)=>{const a=o.__vccOpts||o;for(const[r,i]of n)a[r]=i;return a};const h={props:["formfields"],directives:{scrollTo:window.scrollTo},data(){return{action:"add",isSaving:!1,output:this.formfields}},methods:{save(o=null){if(!this.isSaving){if(typeof o=="object"&&o instanceof KeyboardEvent)if(o.ctrlKey&&o.key==="s")o.preventDefault();else return;if(this.action=="browse"||this.action=="read"){new this.$notification("Can not save when browsing or reading data").color("yellow").timeout().show();return}this.isSaving=!0,axios({method:"put",url:this.route("voyager.voyager-formfields"),data:{data:this.output,action:this.action}}).then(n=>{new this.$notification("Saved values and options!").color("green").timeout().show()}).catch(n=>{}).then(()=>{this.isSaving=!1})}},setAction(o){axios({method:"post",url:this.route("voyager.voyager-formfields"),data:{action:o}}).then(n=>{this.action=o}).catch(n=>{}).then(()=>{this.isSaving=!1})},clearPreferences(){axios({method:"post",url:this.route("voyager.voyager-formfields-clear")}).then(o=>{new this.$notification("Everything cleared").color("green").timeout().show(),document.location.reload(!0)}).catch(o=>{}).then(()=>{this.isSaving=!1})}},created(){this.$watch(()=>this.formfields,()=>{this.output=this.formfields},{deep:!0,immediate:!0})},mounted(){document.addEventListener("keydown",this.save)},unmounted(){document.removeEventListener("keydown",this.save)}},_={class:"w-full inline-flex space-x-1 mb-4"},f={class:"inline-flex space-x-1 items-center"},u=["disabled"],w=["disabled"],y=["selected"],g=["selected"],V=["selected"],b=["selected"],k={class:"inline-flex space-x-1"},C={class:"input-group mt-2"},E={class:"label"},N=["onUpdate:modelValue"],x=e.createElementVNode("button",{class:"button accent"},"List options",-1),B={class:"input-group mt-2"},S={class:"label"},D=["onUpdate:modelValue"],U=e.createElementVNode("button",{class:"button accent"},"View options",-1),T=["value"];function v(o,n,a,r,i,c){const d=e.resolveComponent("locale-picker"),p=e.resolveComponent("slide-in"),m=e.resolveComponent("Card"),F=e.resolveComponent("Collapsible"),A=e.resolveDirective("scrollTo");return e.openBlock(),e.createBlock(m,{title:"Formfields"},{actions:e.withCtx(()=>[e.createElementVNode("div",f,[e.createElementVNode("button",{class:"button accent",onClick:n[0]||(n[0]=(...t)=>c.save&&c.save(...t)),disabled:i.isSaving},"Save",8,u),e.createElementVNode("button",{class:"button accent",onClick:n[1]||(n[1]=(...t)=>c.clearPreferences&&c.clearPreferences(...t)),disabled:i.isSaving},"Clear",8,w),e.createElementVNode("select",{class:"input small",onInput:n[2]||(n[2]=t=>c.setAction(t.target.value))},[e.createElementVNode("option",{value:"browse",selected:i.action=="browse"},"Browse",8,y),e.createElementVNode("option",{value:"read",selected:i.action=="read"},"Read",8,g),e.createElementVNode("option",{value:"edit",selected:i.action=="edit"},"Edit",8,V),e.createElementVNode("option",{value:"add",selected:i.action=="add"},"Add",8,b)],32)])]),default:e.withCtx(()=>[e.createElementVNode("div",_,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.formfields,t=>e.withDirectives((e.openBlock(),e.createElementBlock("button",{class:"button accent",key:`button-${t.formfield.type}`},[e.createTextVNode(e.toDisplayString(t.formfield.name),1)],512)),[[A,`formfield-${t.formfield.type}`]])),128))]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.formfields,t=>(e.openBlock(),e.createBlock(F,{key:t.formfield.type,title:t.formfield.name,titleSize:5,id:`formfield-${t.formfield.type}`},{actions:e.withCtx(()=>[e.createElementVNode("div",k,[e.createVNode(p,{title:o.__("voyager::generic.options")},{actions:e.withCtx(()=>[e.createVNode(d)]),opener:e.withCtx(()=>[x]),default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.formfield.builder_component),{options:t.list_options,"onUpdate:options":s=>t.list_options=s,column:{},columns:[],action:"list-options"},null,8,["options","onUpdate:options"])),e.createElementVNode("div",C,[e.createElementVNode("label",E,e.toDisplayString(o.__("voyager::generic.classes")),1),e.withDirectives(e.createElementVNode("input",{type:"text",class:"input w-full","onUpdate:modelValue":s=>t.list_options.classes=s},null,8,N),[[e.vModelText,t.list_options.classes]])])]),_:2},1032,["title"]),e.createVNode(p,{title:o.__("voyager::generic.options")},{actions:e.withCtx(()=>[e.createVNode(d)]),opener:e.withCtx(()=>[U]),default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.formfield.builder_component),{options:t.view_options,"onUpdate:options":s=>t.view_options=s,column:{},columns:[],action:"view-options"},null,8,["options","onUpdate:options"])),e.createElementVNode("div",B,[e.createElementVNode("label",S,e.toDisplayString(o.__("voyager::generic.classes")),1),e.withDirectives(e.createElementVNode("input",{type:"text",class:"input w-full","onUpdate:modelValue":s=>t.view_options.classes=s},null,8,D),[[e.vModelText,t.view_options.classes]])])]),_:2},1032,["title"])])]),default:e.withCtx(()=>[e.createVNode(m,{"no-header":""},{default:e.withCtx(()=>[i.action=="browse"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.formfield.component),{key:0,options:t.list_options,column:{},action:i.action,modelValue:t.value,"onUpdate:modelValue":s=>t.value=s},null,8,["options","action","modelValue","onUpdate:modelValue"])):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.formfield.component),{key:1,options:t.view_options,column:{},action:i.action,modelValue:t.value,"onUpdate:modelValue":s=>t.value=s},null,8,["options","action","modelValue","onUpdate:modelValue"]))]),_:2},1024),e.createElementVNode("textarea",{class:"input w-full mt-2",value:JSON.stringify(t.value,null,2)},null,8,T)]),_:2},1032,["title","id"]))),128))]),_:1})}var L=l(h,[["render",v]]);voyager.component("voyager-formfields",L)});
