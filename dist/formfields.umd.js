!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("vue")):"function"==typeof define&&define.amd?define(["vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Vue)}(this,(function(e){"use strict";const t={props:["formfields"],directives:{scrollTo:window.scrollTo},data(){return{action:"add",isSaving:!1,output:this.formfields}},methods:{save(e=null){if(!this.isSaving){if("object"==typeof e&&e instanceof KeyboardEvent){if(!e.ctrlKey||"s"!==e.key)return;e.preventDefault()}"browse"!=this.action&&"read"!=this.action?(this.isSaving=!0,axios({method:"put",url:this.route("voyager.voyager-formfields"),data:{data:this.output,action:this.action}}).then((e=>{new this.$notification("Saved values and options!").color("green").timeout().show()})).catch((e=>{})).then((()=>{this.isSaving=!1}))):new this.$notification("Can not save when browsing or reading data").color("yellow").timeout().show()}},setAction(e){axios({method:"post",url:this.route("voyager.voyager-formfields"),data:{action:e}}).then((t=>{this.action=e})).catch((e=>{})).then((()=>{this.isSaving=!1}))},clearPreferences(){axios({method:"post",url:this.route("voyager.voyager-formfields-clear")}).then((e=>{new this.$notification("Everything cleared").color("green").timeout().show(),document.location.reload(!0)})).catch((e=>{})).then((()=>{this.isSaving=!1}))}},created(){this.$watch((()=>this.formfields),(()=>{this.output=this.formfields}),{deep:!0,immediate:!0})},mounted(){document.addEventListener("keydown",this.save)},unmounted(){document.removeEventListener("keydown",this.save)}},o={class:"w-full inline-flex space-x-1 mb-4"},i={class:"inline-flex space-x-1 items-center"},n={class:"inline-flex space-x-1"},l={class:"input-group mt-2"},a={class:"label"},s=e.createVNode("button",{class:"button accent"},"List options",-1),c={class:"input-group mt-2"},r={class:"label"},d=e.createVNode("button",{class:"button accent"},"View options",-1);t.render=function(t,u,p,m,f,v){const h=e.resolveComponent("locale-picker"),w=e.resolveComponent("slide-in"),y=e.resolveComponent("Card"),g=e.resolveComponent("Collapsible"),V=e.resolveDirective("scrollTo");return e.openBlock(),e.createBlock(y,{title:"Formfields"},{actions:e.withCtx((()=>[e.createVNode("div",i,[e.createVNode("button",{class:"button accent",onClick:u[1]||(u[1]=(...e)=>v.save&&v.save(...e)),disabled:f.isSaving},"Save",8,["disabled"]),e.createVNode("button",{class:"button accent",onClick:u[2]||(u[2]=(...e)=>v.clearPreferences&&v.clearPreferences(...e)),disabled:f.isSaving},"Clear",8,["disabled"]),e.createVNode("select",{class:"input small",onInput:u[3]||(u[3]=e=>v.setAction(e.target.value))},[e.createVNode("option",{value:"browse",selected:"browse"==f.action},"Browse",8,["selected"]),e.createVNode("option",{value:"read",selected:"read"==f.action},"Read",8,["selected"]),e.createVNode("option",{value:"edit",selected:"edit"==f.action},"Edit",8,["selected"]),e.createVNode("option",{value:"add",selected:"add"==f.action},"Add",8,["selected"])],32)])])),default:e.withCtx((()=>[e.createVNode("div",o,[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(p.formfields,(t=>e.withDirectives((e.openBlock(),e.createBlock("button",{class:"button accent",key:`button-${t.formfield.type}`},[e.createTextVNode(e.toDisplayString(t.formfield.name),1)],512)),[[V,`formfield-${t.formfield.type}`]]))),128))]),(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(p.formfields,(o=>(e.openBlock(),e.createBlock(g,{key:o.formfield.type,title:o.formfield.name,titleSize:5,id:`formfield-${o.formfield.type}`},{actions:e.withCtx((()=>[e.createVNode("div",n,[e.createVNode(w,{title:t.__("voyager::generic.options")},{actions:e.withCtx((()=>[e.createVNode(h)])),opener:e.withCtx((()=>[s])),default:e.withCtx((()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.formfield.builder_component),{options:o.list_options,"onUpdate:options":e=>o.list_options=e,column:{},columns:[],action:"list-options"},null,8,["options","onUpdate:options"])),e.createVNode("div",l,[e.createVNode("label",a,e.toDisplayString(t.__("voyager::generic.classes")),1),e.withDirectives(e.createVNode("input",{type:"text",class:"input w-full","onUpdate:modelValue":e=>o.list_options.classes=e},null,8,["onUpdate:modelValue"]),[[e.vModelText,o.list_options.classes]])])])),_:2},1032,["title"]),e.createVNode(w,{title:t.__("voyager::generic.options")},{actions:e.withCtx((()=>[e.createVNode(h)])),opener:e.withCtx((()=>[d])),default:e.withCtx((()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.formfield.builder_component),{options:o.view_options,"onUpdate:options":e=>o.view_options=e,column:{},columns:[],action:"view-options"},null,8,["options","onUpdate:options"])),e.createVNode("div",c,[e.createVNode("label",r,e.toDisplayString(t.__("voyager::generic.classes")),1),e.withDirectives(e.createVNode("input",{type:"text",class:"input w-full","onUpdate:modelValue":e=>o.view_options.classes=e},null,8,["onUpdate:modelValue"]),[[e.vModelText,o.view_options.classes]])])])),_:2},1032,["title"])])])),default:e.withCtx((()=>[e.createVNode(y,{"no-header":""},{default:e.withCtx((()=>["browse"==f.action?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.formfield.component),{key:0,options:o.list_options,column:{},action:f.action,modelValue:o.value,"onUpdate:modelValue":e=>o.value=e},null,8,["options","action","modelValue","onUpdate:modelValue"])):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.formfield.component),{key:1,options:o.view_options,column:{},action:f.action,modelValue:o.value,"onUpdate:modelValue":e=>o.value=e},null,8,["options","action","modelValue","onUpdate:modelValue"]))])),_:2},1024),e.createVNode("textarea",{class:"input w-full mt-2",value:JSON.stringify(o.value,null,2)},null,8,["value"])])),_:2},1032,["title","id"])))),128))])),_:1})},voyager.component("voyager-formfields",t)}));
